<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡ç‰‡é¡¯ç¤ºç¨‹å¼</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #e0eafc, #cfdef3);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
        }
        #instructions {
            margin: 20px auto;
            max-width: 450px;
            width: 90%;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: left;
            font-size: 14px;
            color: #444;
        }
        #instructions .content {
            margin-left: 20px;
        }
        #instructions ul {
            padding-left: 0;
            margin-left: 20px;
        }
        #menu, #input-form {
            margin: 20px auto;
            padding: 15px;
            border-radius: 10px;
            background-color: #ffffff;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }
        #menu:hover, #input-form:hover {
            transform: translateY(-2px);
        }
        #menu h1 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 24px;
        }
        #input-form h2 {
            color: #2c3e50;
            margin-top: 0;
        }
        #menu button {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            font-size: 16px;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        #menu button:hover {
            background-color: #2980b9;
            transform: scale(1.02);
        }
        #input-form {
            display: none;
            text-align: left;
        }
        #input-form label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
            color: #34495e;
        }
        #input-form .hint {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 2px;
        }
        #input-form input, #input-form select {
            width: 100%;
            padding: 8px;
            font-size: 14px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: #f9f9f9;
            transition: border-color 0.3s ease;
        }
        #input-form input:focus, #input-form select:focus {
            border-color: #3498db;
            outline: none;
        }
        #input-form button {
            width: 48%;
            padding: 8px;
            margin: 10px 1% 0;
            cursor: pointer;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        #input-form button:nth-child(2) {
            background-color: #e74c3c;
        }
        #input-form button:hover {
            background-color: #27ae60;
            transform: scale(1.02);
        }
        #input-form button:nth-child(2):hover {
            background-color: #c0392b;
        }
        #output {
            margin: 20px auto;
            padding: 15px;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: left;
            white-space: pre;
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            display: none;
            width: fit-content;
            overflow-x: auto;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch; /* æå‡æ‰‹æ©Ÿæ»¾å‹•é«”é©— */
        }

        /* åª’é«”æŸ¥è©¢ï¼šå°è¢å¹•é©é… */
        @media (max-width: 600px) {
            body {
                padding: 5px;
            }
            #instructions, #menu, #input-form {
                padding: 10px;
            }
            #menu h1 {
                font-size: 20px;
            }
            #input-form h2 {
                font-size: 18px;
            }
            #menu button {
                padding: 8px;
                font-size: 14px;
            }
            #input-form label {
                font-size: 13px;
            }
            #input-form input, #input-form select {
                font-size: 13px;
                padding: 6px;
            }
            #input-form .hint {
                font-size: 11px;
            }
            #input-form button {
                padding: 6px;
                font-size: 13px;
            }
            #output {
                font-size: 14px;
                padding: 10px;
            }
            #instructions .content {
                margin-left: 15px;
            }
            #instructions ul {
                margin-left: 15px;
            }
        }
    </style>
</head>
<body>
    <div id="instructions">
        <div class="content">
            <h2>ä½¿ç”¨èªªæ˜</h2>
            <p>æ­¡è¿ä½¿ç”¨å¡ç‰‡é¡¯ç¤ºç¨‹å¼ï¼è«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š</p>
        </div>
        <ul>
            <li><strong>æ”¹è®Šå¡ç‰‡å¤–è§€</strong>ï¼šé¸æ“‡é¡¯ç¤ºæ¨£å¼ï¼ˆé»˜èªã€ç°¡åŒ–ã€Unicodeï¼‰ã€‚</li>
            <li><strong>è¼¸å‡ºå¡ç‰‡</strong>ï¼šè‡ªè¨‚å¡ç‰‡æ•¸é‡ã€èŠ±è‰²ç­‰é¸é …ï¼Œç”Ÿæˆä¸¦é¡¯ç¤ºã€‚</li>
            <li><strong>é¡¯ç¤ºå®Œæ•´ç‰Œçµ„</strong>ï¼šæŸ¥çœ‹å®Œæ•´çš„ 52 å¼µæ’²å…‹ç‰Œã€‚</li>
        </ul>
    </div>
    <div id="menu">
        <h1>é¸æ“‡åŠŸèƒ½</h1>
        <button onclick="showAppearanceForm()">1. æ”¹è®Šå¡ç‰‡å¤–è§€</button>
        <button onclick="showOutputForm()">2. è¼¸å‡ºå¡ç‰‡</button>
        <button onclick="displayFullDeck()">3. é¡¯ç¤ºå®Œæ•´ç‰Œçµ„</button>
    </div>
    <div id="input-form">
        <h2 id="form-title"></h2>
        <div id="form-content"></div>
        <button onclick="submitForm()">æäº¤</button>
        <button onclick="hideForm()">å–æ¶ˆ</button>
    </div>
    <div id="output"></div>

    <script>
        // å®šç¾©å¡ç‰‡é¡åˆ¥
        class Card {
            constructor(suit, rank) {
                this.suit = suit;
                this.rank = rank;
            }

            defaultAppearance() {
                const suitSymbols = { 'S': 'â™ ', 'H': 'â™¥', 'D': 'â™¦', 'C': 'â™£' };
                const suitSymbol = suitSymbols[this.suit];
                const rank = this.rank;
                let middleLines = [];
                if (this.suit === 'S') {
                    middleLines = ['    â€¢â€¢â€¢    ', '   â€¢â€¢â€¢â€¢â€¢   ', '  â€¢â€¢â€¢â€¢â€¢â€¢â€¢  ', '    â€¢â€¢â€¢    '];
                } else if (this.suit === 'H') {
                    middleLines = ['   â€¢   â€¢   ', '  â€¢â€¢â€¢â€¢â€¢â€¢â€¢  ', '   â€¢â€¢â€¢â€¢â€¢   ', '     â€¢     '];
                } else if (this.suit === 'D') {
                    middleLines = ['    â€¢â€¢â€¢    ', '   â€¢â€¢â€¢â€¢â€¢   ', '   â€¢â€¢â€¢â€¢â€¢   ', '    â€¢â€¢â€¢    '];
                } else if (this.suit === 'C') {
                    middleLines = ['    â€¢â€¢â€¢    ', '  â€¢  â€¢  â€¢  ', '  â€¢â€¢â€¢â€¢â€¢â€¢â€¢  ', '    â€¢â€¢â€¢    '];
                }
                return [
                    'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”',
                    `â”‚${rank.padEnd(11)}â”‚`,
                    `â”‚${suitSymbol.padEnd(11)}â”‚`,
                    `â”‚${middleLines[0]}â”‚`,
                    `â”‚${middleLines[1]}â”‚`,
                    `â”‚${middleLines[2]}â”‚`,
                    `â”‚${middleLines[3]}â”‚`,
                    `â”‚          ${suitSymbol}â”‚`,
                    `â”‚          ${rank}â”‚`,
                    'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜'
                ];
            }

            simpleAppearance() {
                const suitSymbols = { 'S': 'â™ ', 'H': 'â™¥', 'D': 'â™¦', 'C': 'â™£' };
                const suitSymbol = suitSymbols[this.suit];
                const rank = this.rank;
                return [
                    'â”Œâ”€â”€â”€â”',
                    `â”‚ ${rank} â”‚`,
                    `â”‚ ${suitSymbol} â”‚`,
                    'â””â”€â”€â”€â”˜'
                ];
            }

            unicodeAppearance() {
                const unicodeCards = {
                    'S': { 'A': 'ğŸ‚¡', '2': 'ğŸ‚¢', '3': 'ğŸ‚£', '4': 'ğŸ‚¤', '5': 'ğŸ‚¥', '6': 'ğŸ‚¦', '7': 'ğŸ‚§', '8': 'ğŸ‚¨', '9': 'ğŸ‚©', 'T': 'ğŸ‚ª', 'J': 'ğŸ‚«', 'Q': 'ğŸ‚­', 'K': 'ğŸ‚®' },
                    'H': { 'A': 'ğŸ‚±', '2': 'ğŸ‚²', '3': 'ğŸ‚³', '4': 'ğŸ‚´', '5': 'ğŸ‚µ', '6': 'ğŸ‚¶', '7': 'ğŸ‚·', '8': 'ğŸ‚¸', '9': 'ğŸ‚¹', 'T': 'ğŸ‚º', 'J': 'ğŸ‚»', 'Q': 'ğŸ‚½', 'K': 'ğŸ‚¾' },
                    'D': { 'A': 'ğŸƒ', '2': 'ğŸƒ‚', '3': 'ğŸƒƒ', '4': 'ğŸƒ„', '5': 'ğŸƒ…', '6': 'ğŸƒ†', '7': 'ğŸƒ‡', '8': 'ğŸƒˆ', '9': 'ğŸƒ‰', 'T': 'ğŸƒŠ', 'J': 'ğŸƒ‹', 'Q': 'ğŸƒ', 'K': 'ğŸƒ' },
                    'C': { 'A': 'ğŸƒ‘', '2': 'ğŸƒ’', '3': 'ğŸƒ“', '4': 'ğŸƒ”', '5': 'ğŸƒ•', '6': 'ğŸƒ–', '7': 'ğŸƒ—', '8': 'ğŸƒ˜', '9': 'ğŸƒ™', 'T': 'ğŸƒš', 'J': 'ğŸƒ›', 'Q': 'ğŸƒ', 'K': 'ğŸƒ' }
                };
                return [unicodeCards[this.suit][this.rank]];
            }
        }

        // ç”Ÿæˆç‰Œçµ„
        function generateSuitDeck(suit) {
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K'];
            return ranks.map(rank => new Card(suit, rank));
        }

        function generateFullDeck() {
            const suits = ['S', 'H', 'D', 'C'];
            return suits.flatMap(suit => generateSuitDeck(suit));
        }

        // é¡¯ç¤ºå¡ç‰‡
        let appearanceMode = 1; // 1: default, 2: simple, 3: unicode

        function displayCards(cards, row) {
            const output = document.getElementById('output');
            output.innerHTML = '';

            const cardLines = cards.map(card => {
                if (appearanceMode === 1) return card.defaultAppearance();
                else if (appearanceMode === 2) return card.simpleAppearance();
                else return card.unicodeAppearance();
            });

            const linesPerCard = appearanceMode === 1 ? 10 : appearanceMode === 2 ? 4 : 1;
            let result = '';
            for (let i = 0; i < cards.length; i += row) {
                const rowCards = cards.slice(i, i + row);
                const rowLines = Array(linesPerCard).fill('');

                rowCards.forEach((card, index) => {
                    const lines = cardLines[i + index];
                    lines.forEach((line, lineIndex) => {
                        rowLines[lineIndex] += line + ' ';
                    });
                });

                result += rowLines.join('\n') + '\n\n';
            }

            output.textContent = result;
            output.style.display = 'block';
        }

        // è¡¨å–®é¡¯ç¤ºèˆ‡è™•ç†
        let currentFormType = '';

        function showAppearanceForm() {
            currentFormType = 'appearance';
            const formTitle = document.getElementById('form-title');
            const formContent = document.getElementById('form-content');
            const inputForm = document.getElementById('input-form');
            const current = appearanceMode === 1 ? 'é»˜èª' : appearanceMode === 2 ? 'ç°¡åŒ–' : 'Unicode';

            formTitle.textContent = 'æ”¹è®Šå¡ç‰‡å¤–è§€';
            formContent.innerHTML = `
                <label>ç•¶å‰å¤–è§€æ¨¡å¼:</label>
                <p>${current}</p>
                <label>é¸æ“‡æ–°å¤–è§€æ¨¡å¼:</label>
                <select id="appearance-mode">
                    <option value="1">1. é»˜èª (è©³ç´°åœ–å½¢)</option>
                    <option value="2">2. ç°¡åŒ– (ç°¡å–®åœ–å½¢)</option>
                    <option value="3">3. Unicode (å–®å­—ç¬¦)</option>
                </select>
                <div class="hint">è«‹é¸æ“‡èˆ‡ç•¶å‰ä¸åŒçš„æ¨¡å¼</div>
            `;
            inputForm.style.display = 'block';
            document.getElementById('menu').style.display = 'none';
            document.getElementById('output').style.display = 'none';
        }

        function showOutputForm() {
            currentFormType = 'output';
            const formTitle = document.getElementById('form-title');
            const formContent = document.getElementById('form-content');
            const inputForm = document.getElementById('input-form');

            formTitle.textContent = 'è¼¸å‡ºå¡ç‰‡';
            formContent.innerHTML = `
                <label>æ˜¯å¦æŒ‡å®šèŠ±è‰²:</label>
                <select id="suit-random" onchange="toggleSuitOptions()">
                    <option value="true" selected>æ˜¯ (æŒ‡å®šå–®ä¸€èŠ±è‰²)</option>
                    <option value="false">å¦ (ä½¿ç”¨å®Œæ•´ç‰Œçµ„)</option>
                </select>
                <div class="hint">é¸æ“‡ã€Œå¦ã€å°‡éš¨æ©Ÿç™¼æ‰€æœ‰ç‰Œ</div>
                <div id="suit-options">
                    <label>èŠ±è‰²ä»£ç¢¼:</label>
                    <select id="suit-code">
                        <option value="S">S (â™ )</option>
                        <option value="H">H (â™¥)</option>
                        <option value="D">D (â™¦)</option>
                        <option value="C">C (â™£)</option>
                    </select>
                    <div class="hint">é¸æ“‡ä¸€ç¨®èŠ±è‰² (S=é»‘æ¡ƒ, H=ç´…å¿ƒ, D=æ–¹å¡Š, C=æ¢…èŠ±)</div>
                    <label>æ˜¯å¦éš¨æ©ŸæŠ½å–:</label>
                    <select id="draw-random">
                        <option value="true">æ˜¯ (éš¨æ©Ÿæ’åº)</option>
                        <option value="false">å¦ (æŒ‰é †åº)</option>
                    </select>
                    <div class="hint">ã€Œæ˜¯ã€å°‡éš¨æ©Ÿæ’åˆ—å¡ç‰‡</div>
                </div>
                <label>å¡ç‰‡ç¸½æ•¸:</label>
                <input type="number" id="total" min="1" max="13" value="1" onchange="updateRowMax()" placeholder="1 ~ 13">
                <div class="hint" id="total-hint">ç¯„åœ: 1 ~ 13 (è‹¥ä¸æŒ‡å®šèŠ±è‰²å‰‡ç‚º 1 ~ 52)</div>
                <label>æ¯è¡Œå¡ç‰‡æ•¸:</label>
                <input type="number" id="row" min="1" max="1" value="1" placeholder="1 ~ ç¸½æ•¸">
                <div class="hint" id="row-hint">ç¯„åœ: 1 ~ å¡ç‰‡ç¸½æ•¸</div>
            `;
            inputForm.style.display = 'block';
            document.getElementById('menu').style.display = 'none';
            document.getElementById('output').style.display = 'none';
            updateRowMax();
        }

        function toggleSuitOptions() {
            const suitRandom = document.getElementById('suit-random').value === 'true';
            document.getElementById('suit-options').style.display = suitRandom ? 'block' : 'none';
            updateRowMax();
        }

        function updateRowMax() {
            const suitRandom = document.getElementById('suit-random').value === 'true';
            const totalInput = document.getElementById('total');
            const rowInput = document.getElementById('row');
            const totalMax = suitRandom ? 13 : 52;
            totalInput.max = totalMax;
            totalInput.placeholder = `1 ~ ${totalMax}`;
            document.getElementById('total-hint').textContent = `ç¯„åœ: 1 ~ ${totalMax}`;
            const totalValue = Math.min(totalInput.value, totalMax);
            rowInput.max = totalValue;
            rowInput.placeholder = `1 ~ ${totalValue}`;
            document.getElementById('row-hint').textContent = `ç¯„åœ: 1 ~ ${totalValue}`;
        }

        function hideForm() {
            document.getElementById('input-form').style.display = 'none';
            document.getElementById('menu').style.display = 'block';
            document.getElementById('output').style.display = 'block';
        }

        function submitForm() {
            const output = document.getElementById('output');
            if (currentFormType === 'appearance') {
                const newMode = parseInt(document.getElementById('appearance-mode').value);
                if (newMode !== appearanceMode) {
                    appearanceMode = newMode;
                    output.textContent = 'å¤–è§€å·²æ›´æ”¹ç‚º ' + (appearanceMode === 1 ? 'é»˜èª' : appearanceMode === 2 ? 'ç°¡åŒ–' : 'Unicode');
                    output.style.display = 'block';
                } else {
                    output.textContent = 'è«‹é¸æ“‡èˆ‡ç•¶å‰ä¸åŒçš„å¤–è§€æ¨¡å¼';
                    output.style.display = 'block';
                }
            } else if (currentFormType === 'output') {
                const suitRandom = document.getElementById('suit-random').value === 'true';
                const suitCode = suitRandom ? document.getElementById('suit-code').value : '';
                const drawRandom = suitRandom ? document.getElementById('draw-random').value === 'true' : true;
                const total = parseInt(document.getElementById('total').value);
                const row = parseInt(document.getElementById('row').value);

                const totalMax = suitRandom ? 13 : 52;
                if (total < 1 || total > totalMax) {
                    output.textContent = `éŒ¯èª¤ï¼šå¡ç‰‡ç¸½æ•¸å¿…é ˆåœ¨ 1 ~ ${totalMax} ä¹‹é–“`;
                    output.style.display = 'block';
                    return;
                }
                if (row < 1 || row > total) {
                    output.textContent = `éŒ¯èª¤ï¼šæ¯è¡Œå¡ç‰‡æ•¸å¿…é ˆåœ¨ 1 ~ ${total} ä¹‹é–“`;
                    output.style.display = 'block';
                    return;
                }

                let deck = suitRandom ? generateSuitDeck(suitCode) : generateFullDeck();
                if (drawRandom) {
                    deck = deck.sort(() => Math.random() - 0.5);
                }
                const selectedCards = deck.slice(0, total);
                displayCards(selectedCards, row);
            }
            document.getElementById('input-form').style.display = 'none';
            document.getElementById('menu').style.display = 'block';
        }

        // é¡¯ç¤ºå®Œæ•´ç‰Œçµ„
        function displayFullDeck() {
            const deck = generateFullDeck();
            displayCards(deck, 13);
            document.getElementById('menu').style.display = 'block';
        }
    </script>
</body>
</html>